HTML Publishing Workflow
======
*This workflow should start after an article has been accepted, reviewed, and is in the Production process, right before the Publication process. This will produce the HTML file that will be uploaded as a galley*

Prep
---
- Log in to Open Journal Systems
- Download the article as a docx file from Open Journal Systems
- Open article .docx file in Microsoft Word
- [Download and install pandoc](https://pandoc.org/installing.html)

Step 1 - Reformatting for HTML
---
*This process will ensure that all the headings in the paper are formatted as Headings (H1, H2, etc.)*

- Click on the title of the article. It should be formatted as Heading 1 in Word. If it is formatted as Normal, highlight the title, and change it to Heading 1 in the Styles Pane
- Keeping the title highlighted, change the font back to Book Antiqua, size 12, in black font color
- - *alternately, you could set Heading 1 and 2 defaults to match the M&M style guide*
- Scroll to next section title (e.g. Introduction, Conclusion), highlight the text, and change the style from Normal to Heading 2.
- Keeping the section title highlighted, change the font to Book Antiqua, size 11, in black font color
- - *alternately, you could set your Heading 1 and 2 defaults to the M&M style guide*
- Continue through the document until all section titles after the article title are formatted as Heading 2

Step 2 - File Conversion
---
- open a command line application (e.g. Terminal on MacOS, PowerShell on Windows)
- type "cd Documents" and hit enter
- type "pwd" and verify that you are in the Documents folder

*Do these next two steps _ONLY_ the first time you make a file conversion. If you already have a folder named pandoc-conversion, skip these two steps*

- type "mkdir pandoc-conversion"
- type "pwd" to verify that you are in the /Documents/pandoc-conversion folder

*pick up here subsequent times that you make a file conversion*
- type "cd pandoc-conversion" and hit enter
- type "pwd" and verify that you are in the Documents/pandoc-conversion folder

- Return to Word

- Save the article file into the pandoc-conversion folder.
*the file name cannot have any spaces in it. If it does change it to match the file name convention AUTHORLASTNAME_SHORTENEDTITLE.docx*

- Return to the command line application (e.g. Terminal)
- type `pandoc filename.docx -f docx -t html -s -o outputfilename.html` replacing "filename.docx" and "outputfilename.html" with the correct file name for the article file
- hit enter

* pandoc should covert the file from docx to HTML

- navigate to your pandoc-conversion folder on your computer and double click the new .html file
- the file should open in your default web browser. Scroll and skim the file checking that the headings are all correct.
*note that any images in the article and the logo will show as broken images right now.*

Step 3 - HTML Template and Formatting
---
- Navigate to [https://github.com/openknowledgecenter/mm-ojs](https://github.com/openknowledgecenter/mm-ojs)
- Click on the [main.css](https://github.com/openknowledgecenter/mm-ojs/blob/main/main.css) file
- Copy lines 1-132 of the CSS code
- open a blank text document using a plain text application on your computer (textedit for Mac)
- Paste the copied code into the new blank document
- Save the document into the pandoc-conversion folder using main.css as the file name
- Click on standard-template.html in the file list [https://github.com/openknowledgecenter/mm-ojs/blob/main/standard-template.html](https://github.com/openknowledgecenter/mm-ojs/blob/main/standard-template.html)
- Select lines 1-31 of the HTML code; and copy (CMD-C)
- open a blank text document using a plain text application on your computer (textedit for Mac)
- Paste the copied code into the new blank document
- Save the document into the pandoc-conversion folder using the naming convention AUTHORLASTNAME_SHORTENEDTITLE_Published.html 
- Skim to `<title>Document</title>`, just under `<meta name=....`
- Replace "Document" text with AUTHORLASTNAME_SHORTENEDTITLE_Published
- Skim to `<header>` and edit issue, volume, date as necessary
- Navigate to Documents/pandoc-conversion folder, and open the file AUTHORLASTNAME_SHORTENDTITLE.html that you made earlier in a plaintext application (e.g. TextEdit on Mac)
- Copy everything from AUTHORLASTNAME_SHORTENDTITLE.html between the `<body>` tag and the `</body>` tag 
- Paste that copied text into the AUTHORLASTNAME_SHORTENEDTITLE_Published.html file inside the `<main> <!-- Copy HTML generated by pandoc here --> </main>` tag
- Save the file

*This next step adds the Center logo into the article*

- Navigate to the icon-snippet.html file in the web browser [https://github.com/openknowledgecenter/mm-ojs/blob/main/icon-snippet.html](https://github.com/openknowledgecenter/mm-ojs/blob/main/icon-snippet.html)
- Highlight lines 1-13 of the HTML code, and copy (CMD-C)
- Paste the icon-snippet code into the AUTHORLASTNAME_SHORTENEDTITLE_Published.html file after the abstract paragraph and before the first `<h2>` tag, which will typically be the Introduction
- Save the file
- Navigate to the Documents/pandoc-conversion folder and double-click to open the AUTHORLASTNAME_SHORTENEDTITLE_Published.html file
- The file should open in your web browser (Chrome, Firefox)
- Double check that the headers are all correct and that the logo is placed in the right position. Click footnotes to ensure they move up and down as expected.

Step 4 - Publishing the HTML article in OJS
---
*This part of the workflow has not been proven or tested yet*
